---
created: 2024-02-18 10:42
---
# Home Work Lesson 3
Проект - Обзоры на товары из интернет магазинов

## Пользовательские истории
1. **Регистрация пользователя** (пока не проработано)
    - Как новый пользователь, я хочу зарегистрироваться в системе, чтобы иметь возможность оставлять свои обзоры о товарах.
    - Как пользователь, я хочу иметь возможность войти в систему с помощью своего электронного адреса и пароля.
1. **Просмотр профиля пользователя**
	- Как пользователь, я хочу иметь возможность посмотреть свой профиль
1. **Изменение профиля пользователя**
	- Как пользователь, я хочу иметь возможность изменять данные о себе.
1. **Просмотр категорий**
       - Как пользователь, я хочу иметь возможность просматривать товары по категориям, чтобы быстро найти нужный мне товар.
1. **Добавление обзора**
    - Как пользователь, я хочу иметь возможность оставлять обзоры о товарах, которые я приобрел, чтобы поделиться своим мнением с другими пользователями.
    - Как пользователь, я хочу иметь возможность оценить товар по шкале, чтобы было понятно, насколько он мне понравился.
1. **Чтение обзоров**
    - Как пользователь, я хочу читать обзоры о товарах, чтобы получить дополнительную информацию перед покупкой.
    - Как пользователь, я хочу иметь возможность фильтровать обзоры по различным критериям, таким как оценка, дата или полезность отзыва.
    - Как пользователь я хочу иметь возможность ставить лайк на понравившийся мне обзор.
1. **Редактирование и удаление обзоров**
    - Как пользователь, я хочу иметь возможность редактировать или удалить свой обзор, если я передумаю или захочу внести изменения.
1. **Уведомления**
    - Как пользователь, я хочу получать уведомления о новых обзорах о товарах, по категориям которые мне интересны, чтобы быть в курсе мнений других пользователей.
1. **Модерация обзоров** (пока не проработано)
    - Как администратор, я хочу иметь возможность модерировать обзоры, чтобы предотвратить размещение спама или оскорбительного контента.
    - Как администратор, я хочу иметь возможность блокировать пользователей, нарушающих правила пользования, чтобы поддерживать порядок в системе.
1. **Комментарии к обзорам** (пока не проработано)
	- Как пользователь, я хочу иметь возможность оставлять комментарии к отзывам

## Описание сервисов
### User Profile Service
**Название**
Сервис профилей пользователей

**Описание**
Предоставляет функциональность по управлению профилями пользователей системы

**Запросы**
- Получение профиля пользователя
	GET /api/v1/users/{id}
- Получение email пользователя
	GET /api/v1/users/{id}/email

**Команды**
- Обновление профиля пользователя
	PUT /api/v1/users/{id}
	{firstName,secondName,email}
- Обновление подписок на категории
	PUT /api/v1/users/{id}/notifications
	{notificationIds}

**События**
- Профиль пользователя создан UserProfileCreated
- Профиль пользователя обновлен UserProfileUpdated
- Подписки на категории обновлены UserSubscriptionsUpdated

### Review Service
**Название**
Сервис обзоров на товар

**Описание**
Предоставляет функциональность по управлению обзорами на товары интернет магазинов

**Запросы**
- Получение списка обзоров
	GET /api/v1/reviews?section="..."&category="..."&offset=...&limit=...&sort=...
- Получение обзора
	GET /api/v1/reviews/{id}
- Получение списка всех категорий
	GET /api/v1/categories

**Команды**
- Создание обзора
	POST /api/v1/reviews
	{section,title,url,imageUrl,price,category,text}
- Изменение обзора
	PUT /api/v1/reviews/{id}
	{section,title,url,imageUrl,price,category,text}
- Удаление обзора
	DELETE /api/v1/reviews/{id}
- Установка лайка за обзор
	POST /api/v1/reviews/{id}/like
- Создание категории
	POST /api/v1/admin/categories
	{name,description}
- Изменение категории
	PUT /api/v1/admin/categories/{id}
	{name,description}
- Удаление категории
	DELETE /api/v1/admin/categories/{id}

**События**
- Обзор создан ReviewCreated

**Зависимости**
- Слушает события UserProfileCreated от сервиса профилей пользователей (сохраняет локально username пользователя)
- Слушает события UserProfileUpdated от сервиса профилей пользователей (обновляет/сохраняет локально username пользователя)

### Notification Service
**Название**
Сервис уведомлений о новых обзорах

**Описание**
Предоставляет функционал отправки уведомлений о появлении новых обзоров

**Логика**
Слушает события с подписками пользователя на категории и сохраняет данные о связях категорий и пользователей
Слушает события о создании обзоров, по категории обзора находит всех пользователей из кэша находит все e-mail пользователей и отправляет уведомления через внешнюю почтовую систему. Если в кэше e-mail отсутствует, запрашивает по HTTP в сервисе профилей и обновляет кэш.

**Запросы**
- Получение списка обзоров
	GET /api/v1/reviews?section="..."&category="..."&offset=...&limit=...&sort=...
- Получение обзора
	GET /api/v1/reviews/{id}

**Команды**
- Создание обзора
	POST /api/v1/reviews
	{section,title,url,imageUrl,price,category,text}
- Изменение обзора
	PUT /api/v1/reviews/{id}
	{section,title,url,imageUrl,price,category,text}
- Установка лайка за обзор
	POST /api/v1/reviews/{id}/like

**События**
- Отправляет уведомления пользователям через внешнюю почтовую систему

**Зависимости**
- Слушает события UserSubscriptionsUpdated от сервиса профилей пользователей
- Слушает события ReviewCreated от сервиса профилей пользователей



